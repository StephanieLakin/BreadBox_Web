<div class="container mx-auto mt-5 p-4">
  <!-- Messages -->
  @if (successMessage) {
    <div class="bg-green-100 text-green-800 p-3 mb-4 rounded">
      {{ successMessage }}
    </div>
  }
  @if (errorMessage) {
    <div class="bg-red-100 text-red-800 p-3 mb-4 rounded">
      {{ errorMessage }}
    </div>
  }

  <!-- Create Client Form -->
  <div class="bg-white shadow-md rounded-lg p-6 mb-6">
    <h4 class="text-xl font-semibold mb-4">Add New Client</h4>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input [(ngModel)]="newClient.name" placeholder="Name" required class="p-2 border rounded-lg">
      <input [(ngModel)]="newClient.emailAddress" placeholder="Email" type="email" required class="p-2 border rounded-lg">
      <input [(ngModel)]="newClient.phone" placeholder="Phone" class="p-2 border rounded-lg">
      <input [(ngModel)]="newClient.address" placeholder="Address" class="p-2 border rounded-lg">
    </div>
    <button (click)="createClient()" class="mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
      Add Client
    </button>
  </div>

  <!-- Clients Table -->
  <div class="bg-white shadow-md rounded-lg p-6">
    <h3 class="text-2xl font-bold mb-4">Clients</h3>

    @if (clients.length > 0) {
      <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse">
          <thead>
            <tr class="bg-gray-200">
              <th class="p-3 border">ID</th>
              <th class="p-3 border">Name</th>
              <th class="p-3 border">Email</th>
              <th class="p-3 border">Phone</th>
              <th class="p-3 border">Address</th>
              <th class="p-3 border">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (client of clients; track client.id) {
              <tr class="border">
                <td class="p-3 border">{{ client.id }}</td>
                <td class="p-3 border">
                  @if (editingClient?.id !== client.id) {
                    {{ client.name }}
                  } @else {
                    <input [(ngModel)]="editingClient!.name" class="w-full p-1 border rounded">
                  }
                </td>
                <td class="p-3 border">
                  @if (editingClient?.id !== client.id) {
                    {{ client.emailAddress }}
                  } @else {
                    <input [(ngModel)]="editingClient!.emailAddress" class="w-full p-1 border rounded">
                  }
                </td>
                <td class="p-3 border">
                  @if (editingClient?.id !== client.id) {
                    {{ client.phone }}
                  } @else {
                    <input [(ngModel)]="editingClient!.phone" class="w-full p-1 border rounded">
                  }
                </td>
                <td class="p-3 border">
                  @if (editingClient?.id !== client.id) {
                    {{ client.address }}
                  } @else {
                    <input [(ngModel)]="editingClient!.address" class="w-full p-1 border rounded">
                  }
                </td>
                <td class="p-3 border">
                  @if (editingClient?.id !== client.id) {
                    <button (click)="editClient(client)" class="bg-blue-600 text-white px-3 py-1 rounded mr-2 hover:bg-blue-700">Edit</button>
                  } @else {
                    <button (click)="updateClient()" class="bg-green-600 text-white px-3 py-1 rounded mr-2 hover:bg-green-700">Save</button>
                    <button (click)="cancelEdit()" class="bg-gray-600 text-white px-3 py-1 rounded mr-2 hover:bg-gray-700">Cancel</button>
                  }
                  <button (click)="deleteClient(client.id)" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">Delete</button>
                </td>
              </tr>
            } @empty {
              <tr>
                <td colspan="6" class="p-4 text-center text-gray-500">No clients available.</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    } @else {
      <p class="text-gray-500 mt-4">No clients available.</p>
    }
  </div>
</div>